

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->



<!--  -->







<title>Request Matching - Matching JSON requests - WireMock</title>







<meta name="description" content="Matching JSON">

<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="WireMock">
<meta property="og:title" content="Request Matching - Matching JSON requests">

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="WireMock" />
<meta name="twitter:description" content="Matching JSON">


  <link rel="canonical" href="https://wiremock.org/studio/docs/request-matching/json/">
  <meta property="og:url" content="https://wiremock.org/studio/docs/request-matching/json/">



  <meta property="og:description" content="Matching JSON">





  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2022-04-01T20:24:46+01:00">
  
    <link rel="next" href="https://wiremock.org/studio/docs/request-matching/matcher-types/" title="Request Matching - Overview of Matcher Types">
  
  
    <link rel="prev" href="https://wiremock.org/studio/docs/recording-stubs/" title="Recording Stubs">
  





  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Tom Akehurst",
      "url" : "https://wiremock.org",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->





  <!-- Google Analytics -->
<style>.async-hide { opacity: 0 !important} </style>
<!--<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;-->
  <!--h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};-->
  <!--(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;-->
<!--})(window,document.documentElement,'async-hide','dataLayer',4000,-->
  <!--{'GTM-WQTGSSM':true});</script>-->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36386229-2', 'auto');
  ga('require', 'GTM-WQTGSSM');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:2905132,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

<link href="https://wiremock.org/feed.xml" type="application/atom+xml" rel="alternate" title="WireMock Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<link href="https://fonts.googleapis.com/css?family=Lato|Source+Code+Pro|Cairo" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Open+Sans:wght@300;400;500;600;700;800&family=Roboto:wght@400;500;700&family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet">

<!-- For all browsers -->
<link rel="stylesheet" href="https://wiremock.org/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<link rel="shortcut icon" type="image/x-icon" href="https://wiremock.org/images/favicon.svg">

    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>
  <div class="signup-modal-overlay"></div>

  <div class="signup-modal">
    <div class="close-modal-icon">
      <img src="https://wiremock.org/images/closeModalIcon.png" width="7" height="7" alt="close icon"/>
    </div>

    <div class="signup-modal-robot">
      <h2>Get Started with</h2>
      <img src="https://wiremock.org/images/wiremockBigModal.png" width="384" />
      <h4>Studio <span>Enterprise</span></h4>

      <div class="box-description-modal">
        <p>Submit your request for WireMock Enterprise and our team will connect you.</p>
      </div>

      <div class="box-description-modal-second">
        <p>Enterprise brings SSO, collaboration features, multiple host on-premise deployment and monitoring integration.</p>
      </div>

    </div>
    <div class="signup-modal-form">
      <h2>Schedule a Demo</h2>
      <script charset="utf-8" type="text/javascript" src="//js-eu1.hsforms.net/forms/shell.js"></script>
      <script>
        hbspt.forms.create({
          region: "eu1",
          portalId: "25724978",
          formId: "4a4ac91e-ce09-4e84-b7e8-4f90df8d3803"
        });
      </script>

    </div>
  </div>
    
    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<style>
  .navlink {
    position: relative !important;
    color: #7d93bd;
    padding-bottom: 0.9rem;
    cursor: pointer;
    font-family: "Ubuntu";
    font-style: normal;
    font-weight: 400;
    font-size: 14px;
  }

  .divSubNav {
    position: relative;
    cursor: default;
    padding: 10px 15px;
    display: none;
    position: absolute;
    content: "";
    left: 0;
    top: 32px;
    width: fit-content;
    background: #FFFFFF;
    box-shadow: 0px -5px 20px rgba(210, 223, 249, 0.5);
  }

  .divSubNav::before {
    position: absolute;
    content: "";
    left: 15px;
    width: 0; 
    height: 0; 
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 7px solid #fff;
    top: -7px;
  }

  .divSubNav a {
    padding: 0 !important;
    margin: 0 0 5px 0;
    width: fit-content !important;
  }

  .divSubNav a:last-child {
    margin-bottom: 0;
  }

  .divSubNav a::before {
    background: none !important;
    
  }

  .navlink:hover > .divSubNav {
    display: block;
  }

  .navlink::before {
    background: unset !important;
  }
  .navHover::before {
    background: unset !important;
  }
</style>

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <a href="/"><img src="https://wiremock.org/images/wireMockLogo.png" style="width: 160px; height: 20px" /></a>
      <nav id="site-nav" class="greedy-nav">
        <!-- <button><div class="navicon"></div></button> -->
        <ul class="visible-links">
          
          
            

            

            
            
            <li class="masthead__menu-item">
              
                <span class="navlink">
                  Docs

                  
                  <div class="divSubNav">
                    
                      <a href="/docs/">
                        WireMock Open Source
                      </a>
                    
                      <a href="/studio/docs/">
                        WireMock Studio
                      </a>
                    
                  </div>
                  
                </span>
              
              
            </li>
            
            

          
            

            

            
            
            <li class="masthead__menu-item">
              
                <a class="base_path navHover" href="https://wiremock.org/support" title="Support">
                  Support
                </a>
              
              
            </li>
            
            

          
            

            

            
            
            <li class="masthead__menu-item">
              
                <span class="navlink">
                  Community

                  
                  <div class="divSubNav">
                    
                      <a href="https://github.com/wiremock/wiremock">
                        Github
                      </a>
                    
                      <a href="https://github.com/wiremock/wiremock/blob/master/CONTRIBUTING.md">
                        Contributing
                      </a>
                    
                      <a href="/external-resources">
                        Resources
                      </a>
                    
                  </div>
                  
                </span>
              
              
            </li>
            
            

          

        </ul>
        <!-- <ul class="hidden-links hidden"></ul> -->
      </nav>
      <ul class="social-links">
        <li>
    <a href="http://github.com/wiremock" target="_blank">
      <img src="https://wiremock.org/images/githubIcon.svg" />
    </a>
  </li>
  <li>
    <a href="https://up9.com/slack" target="_blank">
        <img src="https://wiremock.org/images/slackIcon.svg" />
    </a>
  </li>
  
  <!-- <li>
    <a href="https://twitter.com/up9inc" target="_blank">
        <img src="https://wiremock.org/images/twitterIcon.svg" />
    </a>
  </li> -->
        <img class="separator-line-nav" src="https://wiremock.org/images/separatorLine.png" alt="separator line"/>
        <span class="schedule-demo-nav">Schedule a demo</span>
      </ul>
      <img id="hamburgerMenuIcon" class="hamburgerMenuIcon" src="https://wiremock.org/images/hamburgerMenuIcon.svg" />
      <div id="overlay-menu" class="overlay-menu"></div>
      <div class="mobile-menu-wrapper">
        <img id="closeMenuIcon" class="closeMenuIcon" src="https://wiremock.org/images/closeMenuIcon.svg" />
        <ul>
          <li><a href="/docs">Wiremock Open Source</a></li>
          <li><a href="/studio/docs">WireMock Studio</a></li>
          <li><a href="/support">Support</a></li>
          <li><a href="https://github.com/wiremock/wiremock" target="_blank">Github</a></li>
          <li><a href="https://github.com/wiremock/wiremock/blob/master/CONTRIBUTING.md" target="_blank">Contributing</a></li>
          <li><a href="/external-resources">Resources</a></li>
          <li><span class="schedule-demo-mobile-nav">Schedule a demo</span></li>
        </ul>
        <ul class="mobile-social-links">
          <li>
            <a href="http://github.com/" target="_blank">
              <img src="https://wiremock.org/images/githubIcon.svg" />
            </a>
          </li>
          <li>
            <img src="https://wiremock.org/images/slackIcon.svg" />
          </li>
          
          <li>
            <img src="https://wiremock.org/images/twitterIcon.svg" />
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>


    

<div id="main" class="custom-doc-wrapper" role="main">

  
    

<div class="sidebar">
  <nav class="nav__list">
    <ul class="doc-categories">
      
        
        <li class="doc-category">
          <span class="doc-category__title">Getting Started</span>
          <ul
           class="
           doc-category__sub-nav
           
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/getting-started/desktop/">Desktop</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/getting-started/docker/">Docker</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/getting-started/kubernetes/">Kubernetes</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="doc-category">
          <span class="doc-category__title">Stubbing</span>
          <ul
           class="
           doc-category__sub-nav
           
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/stubbing/"> Basics</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/advanced-stubbing/">Advanced </a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/delays/">Response Delays</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/simulating-faults/">Simulating Faults</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/stateful-scenarios/">Simulating State with Scenarios</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/proxying/">Proxying</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/soap-stubbing/">Working with SOAP</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="doc-category">
          <span class="doc-category__title">Request Matching</span>
          <ul
           class="
           doc-category__sub-nav
           doc-category__sub-nav--active
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/request-matching/matcher-types/">Overview of Matcher Types</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/request-matching/url/">Matching URLs</a>
              </li>
            
              
              
              

              <li class="doc-category__li doc-category__li--selected">
                <a href="/studio/docs/request-matching/json/">Matching JSON requests</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/request-matching/xml/">Matching XML bodies</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="doc-category">
          <span class="doc-category__title">Response Templating</span>
          <ul
           class="
           doc-category__sub-nav
           
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/basics/">Basics</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/conditional-logic-and-iteration/">Conditional Logic and Iteration</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/string-helpers/">String Helpers</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/string-encodings/">String Encodings</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/number-helpers/">Number Helpers</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/dates-and-times/">Dates and Times</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/random-values/">Random Values</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/xml/">Working with XML</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/json/">Working with JSON</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/jwt/">JSON Web Tokens (JWT)</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/misc-helpers/">Miscellaneous Helpers</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="doc-category">
          <span class="doc-category__title">Import & Export</span>
          <ul
           class="
           doc-category__sub-nav
           
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/import-and-export/">Overview</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/import-export/wiremock/">WireMock</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/swagger/">Swagger and OpenAPI</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/import-export/postman/">Postman</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/import-export/api/">Via the API</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="doc-category">
          <span class="doc-category__title">Record & Playback</span>
          <ul
           class="
           doc-category__sub-nav
           
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/recording-stubs/">Recording Stubs</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="doc-category">
          <span class="doc-category__title">Tutorials</span>
          <ul
           class="
           doc-category__sub-nav
           
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/mock-rest-api/">How to build a mock REST API</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/exploratory-testing-tutorial/">Exploratory Testing a Spring Boot App</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/automated-testing-with-java/">Automated Testing with Java</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/default-responses/">Serving a Default Response</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href=""></a>
              </li>
            
          </ul>
        </li>
      
    </ul>

  </nav>
</div>

  

  

  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    
    <meta itemprop="description" content="When stubbing API functions that accept JSON request bodies we may want toreturn different responses based on the JSON sent. WireMock provides two match typesto supports this case - equalToJson and matchesJsonPath, which are describedin detail in this article.">
    <meta itemprop="datePublished" content="April 01, 2022">
    

    <meta itemprop="headline" content="zzzz">

    <div class="page__inner-wrap">
      <header>
        <h1 class="page__title" itemprop="headline">Request Matching - Matching JSON requests
</h1>
      </header>

      <section class="page__content" itemprop="text">
        <p>When stubbing API functions that accept JSON request bodies we may want to
return different responses based on the JSON sent. WireMock provides two match types
to supports this case - <code class="language-plaintext highlighter-rouge">equalToJson</code> and <code class="language-plaintext highlighter-rouge">matchesJsonPath</code>, which are described
in detail in this article.</p>

<h2 id="matching-via-json-equality">Matching via JSON equality</h2>

<p>The <code class="language-plaintext highlighter-rouge">equalToJson</code> match operator performs a semantic comparison of the input JSON
against the expected JSON. This has a number of advantages over a straight string
comparison:</p>

<ul>
  <li>Ignores differences in whitespace</li>
  <li>Can be configured to ignore differences in array order</li>
  <li>Can be configured to ignore extra object attributes</li>
  <li>Supports placeholders so that specific attributes can be excluded from the comparison</li>
</ul>

<p>By default <code class="language-plaintext highlighter-rouge">equalToJson</code> will match only if all of the elements in the input JSON
are the same as the expected JSON, arrays are in the same order and no additional
attributes are present.</p>

<p>For instance, given an expected JSON document like</p>

<p><img src="/images/screenshots/default-equal-to-json.png" title="Default equal to JSON" /></p>

<p>You would need to send in the request body for the stub to match exactly that JSON
in order for the stub to be matched:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl http://localhost:8000/json -d '{
  "itemId": 102938,
  "sizes": ["S", "M", "L"]
}'

{ "result": "OK" }
</code></pre></div></div>

<p>Changing the <code class="language-plaintext highlighter-rouge">sizes</code> order would cause a non-match:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl http://localhost:8000/json -d '{
  "itemId": 102938,
  "sizes": ["L", "M", "S"]
}'

                                               Request was not matched
                                               =======================

-----------------------------------------------------------------------------------------------------------------------
| Closest stub                                             | Request                                                  |
-----------------------------------------------------------------------------------------------------------------------
                                                           |
JSON body matching                                         |
                                                           |
POST                                                       | POST
/json                                                      | /json
                                                           |
{                                                          | {                                                   &lt;&lt;&lt;&lt;&lt; Body does not match
  "itemId" : 102938,                                       |   "itemId" : 102938,
  "sizes" : [ "S", "M", "L" ]                              |   "sizes" : [ "L", "M", "S" ]
}                                                          | }
                                                           |
-----------------------------------------------------------------------------------------------------------------------
</code></pre></div></div>

<p>Adding an extra attribute would also cause a non-match:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl http://localhost:8000/json -d '{
  "itemId": 102938,
  "sizes": ["S", "M", "L"],
  "tag": "essentials"
}'

                                               Request was not matched
                                               =======================

-----------------------------------------------------------------------------------------------------------------------
| Closest stub                                             | Request                                                  |
-----------------------------------------------------------------------------------------------------------------------
                                                           |
JSON body matching                                         |
                                                           |
POST                                                       | POST
/json                                                      | /json
                                                           |
{                                                          | {                                                   &lt;&lt;&lt;&lt;&lt; Body does not match
  "itemId" : 102938,                                       |   "itemId" : 102938,
  "sizes" : [ "S", "M", "L" ]                              |   "sizes" : [ "S", "M", "L" ],
}                                                          |   "tag" : "essentials"
                                                           | }
                                                           |
-----------------------------------------------------------------------------------------------------------------------
</code></pre></div></div>

<h3 id="ignoring-array-order">Ignoring array order</h3>

<p>Sometimes the order of elements in an array is unimportant and can change arbitrarily
between multiple requests. In this case it’s undesirable for your stub match to fail
due to array order, so to remedy this you can simply tick “Ignore array order”.</p>

<p><img src="/images/screenshots/ignore-array-order.png" title="Equal to JSON ignoring array order" class="boxed-image" style="width:200px" /></p>

<p>This will allow requests like the following to succeed:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl http://localhost:8000/json -d '{
  "itemId": 102938,
  "sizes": ["S", "L", "M"]
}'                   

{ "result": "OK" }
</code></pre></div></div>

<h3 id="ignoring-extra-elements">Ignoring extra elements</h3>

<p>If you’re only interested in matching a specific set of JSON elements and don’t mind
if additional elements are present you can tick “Ignore extra elements”.</p>

<p><img src="/images/screenshots/ignore-extra-elements.png" title="Equal to JSON ignoring extra elements" class="boxed-image" style="width:230px" /></p>

<p>This would permit the following to match:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl http://localhost:8000/json -d '{
  "itemId": 102938,
  "sizes": ["S", "M", "L"],
  "tag": "essentials"
}'
</code></pre></div></div>

<h3 id="using-placeholders-to-ignore-specific-json-attributes">Using placeholders to ignore specific JSON attributes</h3>

<p>If you want to check that an element is present, but don’t care what the value is
then you can use JSONUnit placeholder syntax to achieve this.</p>

<p>Note: unlike with XML placeholders this is enabled by default.</p>

<p>For instance, given the following configuration:</p>

<p><img src="/images/screenshots/json-placeholders.png" title="Equal to JSON with placeholder" /></p>

<p>This would permit the the following to match:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl http://localhost:8000/json -d '{
  "itemId": 8888888888,
  "sizes": ["S", "M", "L"],
  "tag": "essentials"
}'
</code></pre></div></div>

<p>When using <code class="language-plaintext highlighter-rouge">${json-unit.ignore}</code>, the element’s type is also ignored (in addition to its value),
so in the above case a string, boolean etc. could have been used in place of the numeric ID.</p>

<p>If you want to constrain an element to a specific type but still ignore the value
you can use one of the following placeholders:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">${json-unit.regex}[A-Z]+</code> (any Java-style regular expression can be used)</li>
  <li><code class="language-plaintext highlighter-rouge">${json-unit.any-string}</code></li>
  <li><code class="language-plaintext highlighter-rouge">${json-unit.any-boolean}</code></li>
  <li><code class="language-plaintext highlighter-rouge">${json-unit.any-number}</code></li>
</ul>

<h2 id="matching-via-jsonpath---matchesjsonpath">Matching via JSONPath - <code class="language-plaintext highlighter-rouge">matchesJsonPath</code></h2>

<p><a href="https://github.com/json-path/JsonPath" target="_blank">JSONPath</a> is an expression language,
similar in concept to XPath that permits elements or collections of elements
to be queried from a JSON document.</p>

<p>WireMock supports stub matching using JSONPath expressions, optionally sub-matching
the result using WireMock’s own operators (<code class="language-plaintext highlighter-rouge">equalTo</code>, <code class="language-plaintext highlighter-rouge">matches</code> etc.).</p>

<p>Given the following configration:</p>

<p><img src="/images/screenshots/jsonpath-with-submatch.png" title="JSONPath with equal to" /></p>

<p>The following JSON will be matched:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl http://localhost:8000/json -d '{
  "itemId": 102938,
  "itemName": "Socks"
}'
</code></pre></div></div>

<h3 id="expression-only-vs-expression--sub-match">Expression only vs. expression + sub-match</h3>

<p>It is possible to match a JSON document without a sub-match by selecting “is present”
from the drop-down:</p>

<p><img src="/images/screenshots/jsonpath-no-submatch.png" title="JSONPath with equal to" /></p>

<p>If you do this, the JSON input will be considered a match if the expression returns
1 or more elements.</p>

<p>This feature is primarily present for compatibility with WireMock projects, and
generally it is better to use sub-matches as this results in simpler JSONPath
expressions and more useful debug output when there is a non-match.</p>

<h3 id="common-jsonpath-examples">Common JSONPath examples</h3>

<p>Matching on a specific array element by position.</p>

<p><code class="language-plaintext highlighter-rouge">$.sizes[1]</code> <code class="language-plaintext highlighter-rouge">equal to</code> <code class="language-plaintext highlighter-rouge">M</code></p>

<p>would match:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"sizes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"S"</span><span class="p">,</span><span class="w"> </span><span class="s2">"M"</span><span class="p">,</span><span class="w"> </span><span class="s2">"L"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Matching on an element of an object found via another element.</p>

<p><code class="language-plaintext highlighter-rouge">$.addresses[?(@.type == 'business')].postcode</code> <code class="language-plaintext highlighter-rouge">contains</code> <code class="language-plaintext highlighter-rouge">N11NN</code></p>

<p>would match:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"home"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Z55ZZ"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"business"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"N11NN"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>It is necessary to use <code class="language-plaintext highlighter-rouge">contains</code> in this instance as a JSONPath expression containing
a query part (between the <code class="language-plaintext highlighter-rouge">[?</code> and <code class="language-plaintext highlighter-rouge">]</code>) will always return a collection
of results.</p>

<p>Matching an element found recursively.</p>

<p><code class="language-plaintext highlighter-rouge">$..postcode</code> <code class="language-plaintext highlighter-rouge">contains</code> <code class="language-plaintext highlighter-rouge">N11NN</code></p>

<p>would match:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"home"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Z55ZZ"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"business"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"N11NN"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>and would also match:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"business"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"N11NN"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      
    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-copyright">
  <img src="https://wiremock.org/images/shortLogo.png" class="short-logo"/>
  
  <span class="footer-copyright-description">&copy; 2022 
  WireMock. Powered by <a href="https://up9.com" target="_new">UP9</a>
  </span>
  
  <ul class="footer-social-links">
    <li>
    <a href="http://github.com/wiremock" target="_blank">
      <img src="https://wiremock.org/images/githubIcon.svg" />
    </a>
  </li>
  <li>
    <a href="https://up9.com/slack" target="_blank">
        <img src="https://wiremock.org/images/slackIcon.svg" />
    </a>
  </li>
  
  <!-- <li>
    <a href="https://twitter.com/up9inc" target="_blank">
        <img src="https://wiremock.org/images/twitterIcon.svg" />
    </a>
  </li> -->
  </ul>
</div>

<script src="https://wiremock.org/assets/js/mobile-navbar.js"></script>
<script src="https://wiremock.org/assets/js/codeTab.js"></script>

<script src="https://wiremock.org/assets/js/sidebar-docs.js"></script>
<script src="https://wiremock.org/assets/js/signup-modal.js"></script>

      </footer>
    </div>

    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" integrity="sha256-xNjb53/rY+WmG+4L6tTl9m6PpqknWZvRt0rO1SRnJzw=" crossorigin="anonymous"></script>
    <!-- <script src="https://wiremock.org/assets/js/main.min.js"></script> -->




  </body>
</html>

